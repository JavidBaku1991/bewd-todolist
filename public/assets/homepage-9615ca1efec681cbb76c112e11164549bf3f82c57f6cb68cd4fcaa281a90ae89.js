$(".homepage.index").ready(function(){var t=$("#task-input"),e=$("#todo-list"),n=[],l="All",c=function(t,l,c){var o=document.createElement("div");o.setAttribute("class","task");var i=document.createElement("p"),r=document.createElement("span");r.setAttribute("class","mark-complete-button"),c&&o.setAttribute("class","task completed"),r.addEventListener("click",function(){"task completed"===o.getAttribute("class")?markTaskAsActive(l,function(t){t&&(o.removeAttribute("class"),n=n.map(function(e){return e.id===t.task.id?t.task:e}),s(),a())},function(t,e){console.error(e)}):markTaskAsComplete(l,function(t){t&&(o.setAttribute("class","completed"),n=n.map(function(e){return e.id===t.task.id?t.task:e}),s(),a())},function(t,e){console.error(e)})});var d=document.createElement("span");d.setAttribute("class","remove-button"),d.innerHTML="\xd7",d.addEventListener("click",function(){var t=this.parentNode.parentNode,e=this.parentNode;deleteOneTask(l,function(c){c.success&&(t.removeChild(e),n=n.filter(function(t){return!(t.id===l)}),a())},function(t,e){console.error(e)})}),i.setAttribute("class","task-content"),i.innerHTML=t,o.appendChild(r),o.appendChild(i),o.appendChild(d),e.append(o)},o=function(){getAllTasks(function(t){n=t.tasks,s(),a()},function(t,e){console.error(e)})},s=function(t){var o;o=t===undefined||t;var s=n.filter(function(t){return"All"===l||("Active"===l?!1===t.completed:!0===t.completed)});return o&&(e.text(""),s.forEach(function(t){c(t.content,t.id,t.completed)})),s};$(".filter-button").click(function(){var t=$(this).attr("id");l!==t&&($(".filter-button").removeClass("selected"),$(this).addClass("selected"),l=$(this).attr("id"),s(),a())}),$("#clear-completed").click(function(){$("#All").click(),s(),$(".completed > .remove-button").click()}),$("#toggle-all").click(function(){n.filter(function(t){return!t.completed}).length>0?$(".task:not(.completed) > .mark-complete-button").click():n.length>0&&$(".task > .mark-complete-button").click()});var a=function(){var t=n.filter(function(t){return!t.completed});s(!1).length>0?$("#toggle-all").css("display","block"):$("#toggle-all").css("display","none"),0===t.length&&n.length>0?$("#toggle-all").addClass("active"):$("#toggle-all").removeClass("active"),0===n.length?$("#footer").css("display","none"):($("#footer").css("display","flex"),n.length-t.length>0?$("#clear-completed").css("display","inline-block"):$("#clear-completed").css("display","none")),$("#active-tasks").text(t.length)};$("#task-input").keypress(function(e){13==e.which&&n.length<10&&""!==t.val()&&postTask(t.val(),function(e){t.val(""),n.push(e.task),a(),"Completed"!==l&&c(e.task.content,e.task.id,e.task.completed)},function(t,e){console.error(e)})}),o(),$("#"+l).addClass("selected")});